import{J as b,L as k,c as U,M as x}from"./index.6205915e.js";import{C as A}from"./Index.4875e309.js";import{C as L}from"./Index.92195ca4.js";import{G as W,a as O}from"./Row.8a74cb5b.js";import"./translations.e71e2202.js";import{_ as I}from"./_plugin-vue_export-helper.eefbdd86.js";import{_ as e}from"./default-i18n.65d58dd6.js";import{a3 as _,a4 as l,q as E,w as i,ae as N,c,b as f,a7 as d,o as p,F as B,af as T,t as s,a as u}from"./runtime-core.esm-bundler.50cb9e6d.js";import"./helpers.7981a424.js";import"./Button.898cae57.js";import"./Pencil.1f4e936a.js";import"./constants.41876895.js";import"./Close.650e0e8f.js";const t="all-in-one-seo-pack",D={setup(){return{pluginsStore:b(),wpCodeStore:k(),links:U}},components:{Cta:A,CoreAlert:L,GridColumn:W,GridRow:O},data(){return{loadingUseSnippet:null,failed:!1,activationLoading:!1,strings:{codesnippets:e("Code Snippets",t),installSnippet:e("Use Snippet",t),editSnippet:e("Edit Snippet",t),ctaDescription:e("Using WPCode you can install AIOSEO code snippets with 1-click directly from this page or the WPCode library inside the WordPress admin.",t),ctaLearnMoreText:e("Learn More about WPCode Snippets",t),noSnippets:e("We encountered an error loading the code snippets, please try again later.",t),activateError:e("An error occurred while activating the addon. Please upload it manually or contact support for more information.",t),permissionWarning:e("You currently don't have permission to activate this addon. Please ask a site administrator to activate first.",t)}}},computed:{showSnippets(){return this.wpCodeStore.pluginInstalled&&this.wpCodeStore.pluginActive&&!this.wpCodeStore.pluginNeedsUpdate},blurClass(){return this.showSnippets?"":"aioseo-blur"},ctaTitle(){if(this.wpCodeStore.pluginNeedsUpdate)return e("Please Update WPCode to load the AIOSEO Snippet Library",t);if(this.wpCodeStore.pluginInstalled){if(!this.wpCodeStore.pluginActive)return e("Please Activate WPCode to load the AIOSEO Snippet Library",t)}else return e("Please Install WPCode to load the AIOSEO Snippet Library",t);return e("Please Install WPCode to load the AIOSEO Snippet Library",t)},ctaButtonText(){if(this.wpCodeStore.pluginNeedsUpdate)return e("Update WPCode",t);if(this.wpCodeStore.pluginInstalled){if(!this.wpCodeStore.pluginActive)return e("Activate WPCode",t)}else return e("Install WPCode",t);return e("Install WPCode",t)}},methods:{decode:x.decode,processUpdateOrActivate(){this.activateOrUpdate(this.wpCodeStore.pluginNeedsUpdate)},activateOrUpdate(g=!1){this.failed=!1,this.activationLoading=!0;const m=g?"upgradePlugins":"installPlugins",a=this.pluginsStore.plugins.wpcodePro.installed?"wpcodePro":"wpcode";this.pluginsStore[m]([{plugin:a,type:"plugin"}]).then(o=>{if(o.body.failed.length){this.activationLoading=!1,this.failed=!0;return}const n=[this.wpCodeStore.loadSnippets()];Promise.all(n).then(()=>{this.activationLoading=!1})}).catch(o=>{this.activationLoading=!1,this.failed=!0,console.error(`Unable to install ${a}: ${o}`)})}}},M={class:"aioseo-tools-wpcode"},V={class:"aioseo-wpcode-snippet"},z={class:"wpcode-snippet-body"},G={class:"snippet-title"},F={class:"snippet-description"},R={class:"wpcode-snippet-footer"};function q(g,m,S,a,o,n){const h=d("base-button"),C=d("grid-column"),w=d("grid-row"),y=d("cta"),v=d("core-alert");return p(),_("div",M,[l("div",{class:N(n.blurClass)},[E(w,null,{default:i(()=>[(p(!0),_(B,null,T(a.wpCodeStore.snippets,(r,P)=>(p(),c(C,{key:P,sm:"12",md:"6",lg:"4"},{default:i(()=>[l("div",V,[l("div",z,[l("div",G,s(r.title),1),l("div",F,s(r.note),1)]),l("div",R,[r.install?(p(),c(h,{key:0,type:"blue",size:"medium",tag:"a",href:n.decode(r.install),onClick:J=>o.loadingUseSnippet=r.install,loading:r.install===o.loadingUseSnippet},{default:i(()=>[u(s(r.installed?o.strings.editSnippet:o.strings.installSnippet),1)]),_:2},1032,["href","onClick","loading"])):(p(),c(h,{key:1,type:"gray",size:"medium",disabled:""},{default:i(()=>[u(s(o.strings.installSnippet),1)]),_:1}))])])]),_:2},1024))),128))]),_:1})],2),!n.showSnippets&&a.wpCodeStore.snippets.length?(p(),c(y,{key:0,"button-text":n.ctaButtonText,"learn-more-link":a.links.getDocUrl("wpcode"),"cta-button-loading":o.activationLoading,onCtaButtonClick:n.processUpdateOrActivate,"same-tab":"","align-top":"","cta-button-action":"","hide-bonus":""},{"header-text":i(()=>[u(s(n.ctaTitle),1)]),description:i(()=>[u(s(o.strings.ctaDescription),1)]),"learn-more-text":i(()=>[u(s(o.strings.ctaLearnMoreText),1)]),_:1},8,["button-text","learn-more-link","cta-button-loading","onCtaButtonClick"])):f("",!0),n.showSnippets&&a.wpCodeStore.snippets.length===0?(p(),c(v,{key:1,type:"yellow"},{default:i(()=>[l("div",null,s(o.strings.noSnippets),1)]),_:1})):f("",!0)])}const se=I(D,[["render",q]]);export{se as default};
